# 内存/IO性能篇

## 15 | 基础篇：Linux内存是怎么工作的？

#### 操作系统内存管理

> 属于多级缓存管理机制CPU->MMU->VIRTUAL->DRAM，详细可查阅csapp第九章

#### 回收机制

>1. 回收缓存，比如使用 LRU（Least Recently Used）算法，回收最近使用最少的内存页面；
>2. 回收不常访问的内存，把不常用的内存通过交换分区直接写到磁盘中；
>3. 杀死进程，内存紧张时系统还会通过 OOM（Out of Memory），直接杀掉占用大量内存的进程。

#### 如何查看

1. free命令

| total  | used                 | free   | shared | buff/cache   | available  |
| ------ | -------------------- | ------ | ------ | ------------ | ---------- |
| 总内存 | 已使用，包括共享内存 | 未使用 | 共享   | 缓存和缓冲区 | 新进程可用 |

2. top命令

   | VIRT               | RES                              | SHR            | %MEM                                 |
   | ------------------ | -------------------------------- | -------------- | ------------------------------------ |
   | 进程虚拟内存的大小 | 常驻内存的大小，不包括Swap和共享 | 共享内存的大小 | 进程使用物理内存占系统总内存的百分比 |

   